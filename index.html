	<!DOCTYPE html>
	<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Attendance Viewer</title>
		
		<!-- Link to Google Fonts (Poppins font) -->
		<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
		<!-- Add a new font link to the head section -->


<style>
/* General reset */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

/* Apply Poppins font to all elements */
body, h1, h2, h3, h4, h5, h6, input, button, p {
    font-family: 'Poppins', sans-serif;
}

/* Body styling */
body {
    font-family: 'Poppins', sans-serif;
    background-color: #F4F7FA; /* Light gray background */
    display: flex;
    justify-content: center;
    align-items: flex-start; /* Align items at the top */
    min-height: 100vh;
    flex-direction: column;
    width: 100%; /* Ensure full width of the screen */
    padding-top: 20px; /* Adjust space for the floating greeting */
    overflow-x: hidden; /* Prevent horizontal scrolling */
}

/* Container for the form */
.container {
    background-color: #FFFFFF;
    border-radius: 12px;
    padding: 30px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    width: 100%;
    max-width: 600px;
    text-align: center;
    margin: 0 auto; /* Center the container */
}

/* Heading */
h1 {
    font-size: 28px; /* Reduce font size for a more compact look */
    color: #2C3E50; /* Dark gray for heading */
    margin-bottom: 20px;
    font-weight: 600;
}

/* Floating greeting style */
#floatingGreeting {
    position: fixed;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    background-color: #FFFFFF;
    border: 2px solid #FF6347;
    border-radius: 20px;
    padding: 8px 16px; /* Adjust padding for better fit */
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    font-size: 18px; /* Smaller font size */
    font-weight: bold;
    font-family: inherit;
    z-index: 10000;
    text-align: center;
    display: none;
}

/* For smaller screens (Mobile) */
@media (max-width: 600px) {
    /* Adjust container padding for mobile */
    .container {
        max-width: 100%;
        padding: 15px;
    }

    /* Adjust heading size */
    h1 {
        font-size: 24px; /* Smaller font for mobile */
    }

    /* Make input and buttons fit in mobile view */
    input[type="text"], button {
        width: 100%;
    }

    /* Adjust spacing for buttons */
    .button-container button {
        width: 100%;
        margin: 8px 0; /* Adjust space between buttons */
        font-size: 16px; /* Smaller font size for buttons */
    }

    #attendanceResults {
        font-size: 14px; /* Smaller font size for result text */
    }

    #floatingGreeting {
        font-size: 16px; /* Adjust greeting size for mobile */
        padding: 10px 20px;
        width: 90%;
        max-width: 350px;
    }
}

/* Input fields and button styles */
input[type="text"], input[type="password"] {
    padding: 14px;
    font-size: 16px; /* Smaller font size */
    width: 100%;
    margin: 10px 0;
    border-radius: 30px;
    border: 2px solid #BDC3C7; /* Light gray border */
    outline: none;
    transition: all 0.3s ease-in-out;
}

/* Button styles */
button {
    padding: 14px 28px; /* Reduced padding for compact buttons */
    font-size: 16px; /* Slightly smaller button text */
    cursor: pointer;
    border-radius: 30px;
    border: none;
    background: #FF6347; /* Tomato color background */
    color: white;
    margin: 10px 0;
    transition: transform 0.3s ease, background-color 0.3s ease;
    font-weight: 600;
}

/* Loading state styling */
#loading {
    font-size: 16px;
    color: #2C3E50; /* Dark gray text for loading */
    margin-top: 20px;
    display: none; /* Ensure it is hidden by default */
}

/* Error message styling */
.error {
    color: #E74C3C; /* Red for error messages */
    margin-top: 20px;
    font-size: 14px;
    display: none;
}

/* Result box styling */
#attendanceResults {
    display: none;
    margin-top: 30px; /* Reduced margin for better fit */
    padding: 20px;
    background-color: #ECF0F1; /* Light gray background */
    border: 1px solid #BDC3C7; /* Light gray border */
    border-radius: 10px;
    color: #2C3E50; /* Dark gray text */
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.1);
    font-size: 14px; /* Smaller font for results */
    text-align: left;
    line-height: 1.6;
}

#attendanceResults h4 {
    font-size: 20px; /* Reduced header size */
    color: #FF6347; /* Tomato for headers */
    margin-bottom: 12px;
}

#attendanceResults h3 {
    font-size: 14px; /* Smaller subheading font */
    color: #2C3E50; /* Dark gray text */
    margin-bottom: 10px;
}

/* List styling in results */
#attendanceResults ul {
    list-style-type: none;
    padding: 0;
}

#attendanceResults li {
    font-size: 12px; /* Smaller list font */
    margin: 8px 0;
}

#attendanceResults li strong {
    color: #2C3E50; /* Dark gray for subject names */
}

/* Footer styling */
#footer {
    position: fixed;
    bottom: 0;
    width: 100%;
    padding: 10px 0;
    background-color: #FFFFFF;
    box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.1);
    text-align: center;
    font-size: 14px; /* Smaller footer text */
    color: #BDC3C7;
}

#footer a {
    text-decoration: none;
    color: #FF6347; /* Tomato color for the link */
}

/* Button container for View Marks and Follow me */
.button-container {
    display: flex;
    justify-content: space-between; /* Align buttons on the same line */
    gap: 10px; /* Space between buttons */
    flex-wrap: wrap; /* Wrap to the next line if needed */
    margin-top: 20px; /* Space before buttons */
}

/* Button for "Go Back" should be on the next line */
.button-container .go-back {
    width: 100%; /* Full width for "Go Back" */
    font-size: 16px; /* Smaller font size */
    margin-top: 15px;
}

/* Adjust button size for mobile */
@media (max-width: 600px) {
    .button-container button {
        width: 48%; /* Slightly smaller buttons */
        font-size: 14px; /* Reduce button text size */
    }

    .button-container .go-back {
        width: 100%;
    }
}
</style>


	</head>
	<body>

		<div class="container">
			<h1>Attendance Viewer For KMEC 1st Year's</h1>
			
			<form id="attendanceForm">
				<label for="mobile_number" style="font-size: 18px; color: #333;"></label>
				<input type="text" id="mobile_number" name="mobile_number" placeholder="Enter your parent's mobile number" maxlength="10" required>
				<button type="submit">Get Attendance</button>
				
<a href="https://www.instagram.com/vardan.19" target="_blank" style="color: tomato;"></a>

			</form>

			<!-- Error message will show if mobile number is missing or there's an issue -->
			<div id="errorMessage" class="error"></div>

			<!-- Loading message while waiting for API response -->
			<div id="loading">Loading...</div>

		 

	<!-- Result Box (hidden initially) -->
	<div id="attendanceResults"></div>


			<!-- Button container with Instagram Link -->
<div id="buttonContainer" class="button-container" style="display: none;">
  <button id="goBackButton" onclick="goBack()">Go Back</button>
  <button id="contactMeButton" onclick="contactMe()">View CIE Marks</button>
  <!-- Instagram Button -->
  <button id="instagramButton">
    <a href="https://www.instagram.com/vardan.19" target="_blank" style="color: white; text-decoration: none; display: block; padding: 16px 32px; background-color: #FF6347; border-radius: 30px;">
      Follow me on Instagram
    </a>
  </button>
</div>

			
		</div>

		<script>
		// Function to reload the page
		function goBack() {
			location.reload(); // Reloads the current page
		}
			// Function to mask the input number while typing
			const inputField = document.getElementById('mobile_number');

			inputField.addEventListener('input', function() {
				// Hide the input field text while typing by switching to password type
				inputField.type = 'text';
			});
			
		// Function to fetch and display the user's name in the floating bubble with dynamic greeting and emoji
	function fetchAndDisplayName(mobileNumber) {
		// Get current hours
		const hours = new Date().getHours();
		let greeting;

		// Determine the greeting based on the time of day with emojis
		if (hours >= 00 && hours < 12) {
			greeting = "Good Morning ☀️";
		} else if (hours >= 12 && hours < 17) {
			greeting = "Good Afternoon 🌤️";
		} else if (hours >= 17 && hours < 24) {
			greeting = "Good Evening 🌆";
		} else {
			greeting = "Good Night 🌙";
		}

		// Fetch the user's name
		fetch(`https://vardanapi02.89determined.workers.dev/?mobile_number=${mobileNumber}`)
			.then(response => response.text()) // Get the plain text name from the response
			.then(name => {
				// Update the floating greeting
				const floatingGreeting = document.getElementById('floatingGreeting');
				floatingGreeting.innerHTML = `${greeting},<br><span>${name}</span>`;
				floatingGreeting.style.display = 'block'; // Show the greeting bubble
			})
			.catch(error => {
				console.error('Failed to fetch user name:', error);
			});
	}



	// Handle form submission
document.getElementById("attendanceForm").addEventListener("submit", function(event) {
    event.preventDefault();

    const mobileNumber = document.getElementById("mobile_number").value;

    // Validate if the mobile number is exactly 10 digits
    if (!mobileNumber || mobileNumber.length !== 10 || isNaN(mobileNumber)) {
        document.getElementById('errorMessage').style.display = 'block';
        document.getElementById('errorMessage').textContent = 'Please enter a valid 10-digit mobile number.';
        return;
    }

    // Store the mobile number in localStorage
    localStorage.setItem('mobileNumber', mobileNumber);

    // Hide form and heading
    document.querySelector('h1').style.display = 'none';
    document.getElementById('attendanceForm').style.display = 'none';

    // Clear previous results and error message
    document.getElementById('attendanceResults').style.display = 'none';
    document.getElementById('attendanceResults').innerHTML = "";
    document.getElementById('errorMessage').style.display = 'none';

    // Show loading message
    document.getElementById('loading').style.display = 'block';

    // First, fetch and display the user's name
    fetchAndDisplayName(mobileNumber);

    // Make the API request to fetch attendance results
    fetch(`https://vardanapi01.89determined.workers.dev/?mobile_number=${mobileNumber}`)
        .then(response => response.text())
        .then(html => {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('attendanceResults').style.display = 'block';
            document.getElementById('attendanceResults').innerHTML = html;

            // Show Go Back and CIE Marks buttons
            document.getElementById('buttonContainer').style.display = 'flex';
        })
        .catch(error => {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('errorMessage').style.display = 'block';
            document.getElementById('errorMessage').textContent = 'Failed to retrieve attendance data.';
        });
});


			// Function to open Instagram profile when Contact Me is clicked
			function contactMe() {
				window.open('cie.html');
			}
		</script>

		<!-- Footer -->
		<div id="footer">
			<p>Designed by <strong><a href="https://www.instagram.com/vardn.19" target="_blank" style="color: #FF6347; text-decoration: none;">Vardan(NGIT)</a></strong></p>
		</div>
	<!-- Floating Greeting -->
	<div id="floatingGreeting" style="display: none;"></div>



	</body>
	</html>
